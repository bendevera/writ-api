(this["webpackJsonpwrit-frontend"]=this["webpackJsonpwrit-frontend"]||[]).push([[0],{24:function(e,t,a){e.exports=a(36)},29:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(21),l=a.n(r),c=(a(29),a(6)),s=a(7),i=a(9),m=a(8),u=a(10),h=a(4),d=a(2),g=Object(d.a)({}),p=a(13),f=function(e){var t=e.auth?"Logout":"Login",a=e.auth?"/logout":"Logout";return o.a.createElement("nav",{className:"navbar navbar-light bg-light justify-content-between"},o.a.createElement("span",{className:"navbar-brand mb-0 h1"},"writ"),o.a.createElement(p.a,{to:a},o.a.createElement("button",{className:"btn btn-outline-dark"},t)))},b=function(e){return o.a.createElement("div",{className:"fluid-container"},o.a.createElement("div",{className:"jumbotron"},o.a.createElement("h1",{className:"display-4"},"Welcome to writ:"),o.a.createElement("p",{className:"lead"},"A version control system for literary works."),o.a.createElement("hr",{className:"my-4"}),o.a.createElement("p",null,"Sign up, get to writing freely and cleanly."),o.a.createElement(p.a,{className:"btn btn-outline-dark btn-lg",to:"/register"},"Register")))},E=a(12),w=a(15),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value;a.setState(Object(w.a)({},a.state,Object(E.a)({},e.target.name,t)))},a.handleSubmit=function(e){e.preventDefault(),a.props.sendRegister(a.state.email,a.state.password)},a.state={email:"",password:""},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"container my-2"},o.a.createElement("h2",null,"Register an account."),o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Email address"),o.a.createElement("input",{name:"email",onChange:this.handleChange,type:"email",className:"form-control"}),o.a.createElement("small",{className:"form-text text-muted"},"We'll never share your email with anyone else.")),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Password"),o.a.createElement("input",{name:"password",onChange:this.handleChange,type:"password",className:"form-control"})),o.a.createElement("button",{className:"btn btn-outline-dark",onClick:this.handleSubmit},"Submit")))}}]),t}(o.a.Component),v=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value;a.setState(Object(w.a)({},a.state,Object(E.a)({},e.target.name,t)))},a.handleSubmit=function(e){e.preventDefault(),a.props.sendLogin(a.state.email,a.state.password)},a.state={email:"",password:""},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"container my-2"},o.a.createElement("h2",null,"Login to your account."),o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Email address"),o.a.createElement("input",{name:"email",onChange:this.handleChange,type:"email",className:"form-control"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Password"),o.a.createElement("input",{name:"password",onChange:this.handleChange,type:"password",className:"form-control"})),o.a.createElement("button",{className:"btn btn-outline-dark",onClick:this.handleSubmit},"Submit")))}}]),t}(o.a.Component),j=function(e){function t(e){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).call(this,e))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.props.fetchData()}},{key:"render",value:function(){return o.a.createElement("div",{className:"container"},o.a.createElement("h2",null,"My Works."),this.props.data.map((function(e,t){return o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-body"},o.a.createElement("h5",{className:"card-title"},"Card title"),o.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},"Card subtitle"),o.a.createElement("p",{className:"card-text"},"Some quick example text to build on the card title and make up the bulk of the card's content."),o.a.createElement("a",{href:"#",className:"card-link"},"Card link"),o.a.createElement("a",{href:"#",className:"card-link"},"Another link")))})))}}]),t}(o.a.Component),y={apiURL:"http://localhost:5000"};a(35);var N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).getMyWorks=function(){var e=new Promise((function(e,t){console.log("FUCK THIS"),fetch(y.apiURL+"/works",{method:"get",headers:{"Access-Control-Allow-Origin":"*",Authorization:(console.log("Bearer "+localStorage.getItem("writToken")),"Bearer "+localStorage.getItem("writToken"))}}).then((function(e){return e.json()})).then((function(a){console.log(a),"success"==a.status&&(console.log("Setting writToken"),localStorage.setItem("writToken",a.auth_token),e("Logged in.")),t(a.message)}))}));console.log(e)},a.state={authenticated:!1,works:[]},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleLogin",value:function(e,t){(function(e,t){return new Promise((function(a,n){fetch(y.apiURL+"/auth/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){console.log(e),"success"==e.status&&(console.log("Setting writToken"),localStorage.setItem("writToken",e.auth_token),a("Logged in.")),n(e.message)}))}))})(e,t).then((function(e){console.log("Should push /works"),g.push("/works")})).catch((function(e){console.log(e)}))}},{key:"handleRegister",value:function(e,t){(function(e,t){return new Promise((function(a,n){fetch(y.apiURL+"/auth/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){console.log(e),"success"==e.status&&(console.log("Setting writToken"),localStorage.setItem("writToken",e.auth_token),a("Logged in.")),n(e.message)}))}))})(e,t).then((function(e){console.log("Should push /works"),g.push("/works")})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return o.a.createElement(h.b,{history:g},o.a.createElement("div",{className:"App"},o.a.createElement(f,{auth:this.state.authenticated}),o.a.createElement(h.a,{exact:!0,path:"/",component:b}),o.a.createElement(h.a,{path:"/register",render:function(t){return o.a.createElement(k,Object.assign({},t,{sendRegister:e.handleRegister}))}}),o.a.createElement(h.a,{path:"/login",render:function(t){return o.a.createElement(v,Object.assign({},t,{sendLogin:e.handleLogin}))}}),o.a.createElement(h.a,{path:"/works",render:function(t){return o.a.createElement(j,Object.assign({},t,{data:e.state.works,fetchData:e.getMyWorks}))}})))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.4955d1f2.chunk.js.map